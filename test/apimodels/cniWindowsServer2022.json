{
   "apiVersion": "vlabs",
   "properties": {
      "orchestratorProfile": {
         "orchestratorType": "Kubernetes",
         "orchestratorRelease": "1.22",
         "kubernetesConfig": {
            "networkPlugin": "azure",
            "networkPolicy": "azure",
            "azureCNIVersion": "",
            "azureCNIURLWindows": "",
            "containerRuntime": "containerd",
            "windowsContainerdURL": "https://github.com/containerd/containerd/releases/download/v1.5.6/containerd-1.5.6-windows-amd64.tar.gz",
            "apiServerConfig": {
               "--tls-min-version": "VersionTLS12",
               "--tls-cipher-suites": "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256"
            },
            "kubeletConfig": {
               "--feature-gates": "WindowsHostProcessContainers=true"
            },
            "addons": [
               {
                  "name": "azure-npm-daemonset",
                  "enabled": true,
                  "containers": [
                     {
                        "name": "azure-npm-daemonset",
                        "image": ""
                     }
                  ]
               }
            ]
         }
      },
      "masterProfile": {
         "count": 1,
         "dnsPrefix": "cniWindows",
         "vmSize": "Standard_D2_v2"
      },
      "agentPoolProfiles": [
         {
            "name": "windowspool2",
            "count": 2,
            "vmSize": "Standard_D2_v2",
            "availabilityProfile": "VirtualMachineScaleSets",
            "osType": "Windows"
         }
      ],
      "windowsProfile": {
         "adminUsername": "azureuser",
         "adminPassword": "azureTest@!",
         "enableAutomaticUpdates": false,
         "sshEnabled": false,
         "windowsPauseImageURL": "mcr.microsoft.com/oss/kubernetes/pause:3.6",
         "alwaysPullWindowsPauseImage": true,
         "imageReference" : {
            "name": "runner-windows",
            "imageReference.resourceGroup": "azure-pipelines-vmss-1es",
            "subscriptionId": "d9eabe18-12f6-4421-934a-d7e2327585f5",
            "gallery": "acnazpgallerywindows",
            "version": "1.0.24"
         }
      },
      "linuxProfile": {
         "adminUsername": "azureuser",
         "ssh": {
            "publicKeys": [
               {
                  "keyData": ""
               }
            ]
         }
      },
      "servicePrincipalProfile": {
         "clientId": "",
         "secret": ""
      }
   }
}

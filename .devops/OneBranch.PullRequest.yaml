trigger:
  branches:
    include:
      - gh-readonly-queue/master/*

resources:
  repositories:
  - repository: templates
    type: git
    name: OneBranch.Pipelines/GovernedTemplates
    ref: refs/heads/master
  
  - repository: 1ESPipelineTemplates
    type: git
    name: 1ESPipelineTemplates/1ESPipelineTemplates
    ref: refs/tags/release-2024-07-10-3


extends:
  template: v2/OneBranch.Official.CrossPlat.yml@templates
  parameters:
    isOfficial: true
    platform:
      name: onebranch
    globalSdl:
      cg:
        failOnAlert: false
      suppression:
        suppressionFile: $(Build.SourcesDirectory)\.gdn\.gdnsuppress
        suppressionSet: default
      credscan:
        enabled: true
        suppressionsFileForArtifacts: $(Build.SourcesDirectory)/.config/CredScanSuppressions.json
    stages:
    - template: $(Build.SourcesDirectory)/.pipelines/pipeine.yaml

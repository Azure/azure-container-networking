parameters:
  name: ""
  imageVersionTag: ""

steps:
  - bash: |
      go version
      go env
      mkdir -p '$(GOBIN)'
      mkdir -p '$(GOPATH)/pkg'
      mkdir -p '$(modulePath)'
      echo '##vso[task.prependpath]$(GOBIN)'
      echo '##vso[task.prependpath]$(GOROOT)/bin'
    name: "GoEnv"
    displayName: "Set up the Go environment"

  - bash: |
      echo ${{ parameters.imageVersionTag }}
    displayName: Echo Tag
    workingDirectory: "$(modulePath)"

  - script: |
      sudo -E env "PATH=$PATH" VERSION=$(EnvironmentalVariables.Tag)-test make test-integration
    workingDirectory: "$(modulePath)"
    name: "aksswifte2e"
    displayName: "Run AKS Swift E2E"


